:root{
  --bg:#fdf6ee; --panel:#ffffff; --text:#121316; --muted:#626772;
  --brand:#f3b464; --accent:#9fa9ff; --ring:#e7d3a4;
  --hero-grad: radial-gradient(60% 100% at 10% 10%, #fff8f0, #f6efe6 60%, #efe7df 100%);
  --wall-bg:#ffe9d1;
}
:root.dark{
  --bg:#0d0f12; --panel:#14171c; --text:#e9ebf0; --muted:#a8b0bd;
  --brand:#f1bd6f; --accent:#b7bfff; --ring:#4ed7c0;
  --hero-grad: radial-gradient(60% 100% at 10% 10%, #16191f, #0f1216 60%, #0c0f13 100%);
  --wall-bg:#231b14;
  --cta-outline-bg: #fff;
  --cta-outline-color: #121316;
}

*{box-sizing:border-box}
html,body{height:100%}
body{margin:0; font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background:var(--bg); color:var(--text)}

.site-header{position:sticky; top:0; z-index:100; display:flex; align-items:center; gap:1rem; padding:.8rem 1rem; background:var(--panel); border-bottom:1px solid rgba(0,0,0,.06)}
.brand{margin:0; font-weight:900; letter-spacing:.2px}
.brand span{color:var(--brand)}
.nav{margin-left:auto; display:flex; gap:.5rem}
.nav-btn{background:transparent; color:var(--text); border:1px solid rgba(0,0,0,.12); padding:.45rem .7rem; border-radius:.6rem; cursor:pointer}
.nav-btn[aria-current="page"]{outline:2px solid var(--ring); outline-offset:2px}
.header-actions{display:flex; gap:.6rem; align-items:center}
.music-btn{background:var(--brand); color:#1a1106; border:none; padding:.55rem .9rem; border-radius:.7rem; cursor:pointer; font-weight:800; box-shadow:0 8px 28px rgba(243,180,100,.25)}

main{max-width:1200px; margin:0 auto; padding:1.25rem}
.view{display:none; animation:fade .25s ease}
.view.active{display:block}
@keyframes fade{from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:none}}

/* HOME */
.hero-block{background:var(--hero-grad); border-radius:1.2rem; overflow:hidden; padding:clamp(1.2rem, 3vw, 2.2rem); margin-bottom:1.2rem}
.hero-inner{display:grid; gap:1rem; grid-template-columns:1.2fr .8fr; align-items:center}
@media (max-width:900px){ .hero-inner{grid-template-columns:1fr; text-align:center} }

/* reserve space so hover text doesn't push */
.hero-title-slot{grid-column:1/-1; height:clamp(2.4rem, 6vw, 4.2rem); display:flex; align-items:flex-end}
.evoke-title{
  margin:0; font-size:clamp(3.6rem, 9vw, 7.6rem); line-height:.9; letter-spacing:.02em; font-weight:900;
  background:linear-gradient(180deg,var(--text),rgba(0,0,0,.35)); -webkit-background-clip:text; color:transparent;
  transition: none;
}
.evoke-title:hover {
  transform: none;
}
.evoke-title.is-alt{
  font-size:clamp(1.2rem, 3.6vw, 2rem); line-height:1.15; letter-spacing:.01em;
  color:var(--text); -webkit-background-clip:initial; background:none;
}

.subtitle{margin:.2rem 0 1rem; color:var(--muted); max-width:62ch}
.watch-wrap{justify-self:center; align-self:center; perspective:1200px}
.watch{width:min(520px, 92%); border-radius:1rem; display:block; box-shadow:0 18px 40px rgba(0,0,0,.12); transition:transform .5s}
.watch:hover{transform:scale(1.02)}
.hero-actions{display:flex; align-items:center; gap:.9rem; flex-wrap:wrap}
@media (max-width:900px){ .hero-actions{justify-content:center} }
.cta{background:var(--brand); color:#1a1106; border:none; padding:.95rem 1.35rem; border-radius:.95rem; cursor:pointer; font-weight:800; box-shadow:0 14px 44px rgba(243,180,100,.35)}

/* Image wall */
.wall-block{margin-left:calc(50% - 50vw); width:100vw; background:var(--wall-bg); border-radius:1rem; overflow:hidden}
.image-wall{display:grid; gap:0}
.tile{position:relative; aspect-ratio:1 / 1; perspective:900px; cursor:pointer}
.card{position:absolute; inset:0; transform-style:preserve-3d; transition:transform .45s cubic-bezier(.2,.7,.2,1)}
.tile:hover .card{transform:rotateY(180deg)}
.side{position:absolute; inset:0; backface-visibility:hidden; overflow:hidden; border-radius:1.15rem}
.front img, .back img{width:100%; height:100%; object-fit:cover; display:block}
.front img{filter:blur(6px) saturate(.9) brightness(.95); transform:scale(1.06)}
.back{transform:rotateY(180deg)}

/* FEED */
.toolbar{display:flex; align-items:center; justify-content:space-between; gap:1rem; margin:1rem 0}
#search{flex:1; max-width:360px; padding:.6rem .8rem; border-radius:.6rem; border:1px solid rgba(0,0,0,.14); background:var(--panel); color:var(--text)}

.spotlight{border-radius:1.2rem; padding:1.2rem; margin:1rem 0; background:var(--panel); border:1px solid rgba(0,0,0,.08)}
.spotlight-month{background:linear-gradient(120deg, rgba(159,169,255,.18), rgba(243,180,100,.22)); box-shadow:0 30px 80px rgba(159,169,255,.15), 0 20px 60px rgba(243,180,100,.15)}
.spotlight-badge{display:inline-block; background:var(--brand); color:#1a1106; font-weight:800; padding:.3rem .7rem; border-radius:.7rem; box-shadow:0 6px 20px rgba(243,180,100,.35)}
.spotlight-badge.soft{background:#eceefe; color:#333; box-shadow:none}
.spotlight-body{display:grid; grid-template-columns:1fr 320px; gap:1.2rem; align-items:center; position: relative}
.spotlight-body.compact{grid-template-columns:1fr 200px}
@media (max-width:900px){ .spotlight-body, .spotlight-body.compact{grid-template-columns:1fr} }
.spotlight-img{width:100%; height:220px; object-fit:cover; border-radius:.9rem}
.spotlight-img.compact{height:160px}
.som-excerpt{opacity:.9}
.som-actions{display:flex; gap:.7rem; align-items:center}
.cta.outline{background:transparent; border:1px solid rgba(0,0,0,.2)}

.mini-spotlights{display:grid; grid-template-columns:1fr 1fr; gap:1rem}
@media (max-width:900px){ .mini-spotlights{grid-template-columns:1fr} }

.posts{display:grid; grid-template-columns:1fr; gap:.9rem; list-style:none; padding:0; margin:0}
@media (min-width:820px){ .posts{ grid-template-columns:1fr 1fr } }
.post{display:grid; grid-template-columns:1fr auto; gap:.6rem; align-items:stretch; background:var(--panel); border:1px solid rgba(0,0,0,.08); border-radius:.8rem; overflow:hidden}
.post .expand{display:flex; gap:.8rem; background:transparent; color:inherit; text-align:left; border:none; cursor:pointer; padding:.8rem}
.thumb{width:108px; height:108px; object-fit:cover; border-radius:.5rem; background:#333; outline:1px solid rgba(0,0,0,.08)}
.info{flex:1}
.title{margin:.1rem 0 .2rem}
.meta{font-size:.85rem; color:var(--muted)}
.excerpt{margin:.3rem 0 0; color:var(--muted)}
.actions{display:flex; align-items:center; gap:.4rem; padding:.6rem}
.vote,.comment{background:transparent; border:1px solid rgba(0,0,0,.12); padding:.35rem .5rem; border-radius:.5rem; color:inherit; cursor:pointer}

/* MEMORY DETAIL */
.back-fab{
  position:fixed; left:16px; top:104px; z-index:120;
  background:var(--brand); color:#1a1106; border:none; padding:.8rem 1.1rem;
  border-radius:.9rem; font-weight:900; font-size:1rem;
  box-shadow:0 12px 34px rgba(243,180,100,.38); cursor:pointer;
}
.story-header{margin:.5rem 0 1rem}
.story-sub{display:flex; gap:.8rem; align-items:center; color:var(--muted); flex-wrap:wrap}
.author{font-weight:700; color:var(--text)}
.story-grid{display:grid; grid-template-columns:1.1fr .9fr; gap:1.2rem; align-items:start}
@media (max-width:980px){ .story-grid{grid-template-columns:1fr} }

.video-grid{display:grid; grid-template-columns:1fr 1fr; gap:.8rem}
.video-grid.one{grid-template-columns:1fr}
#story-week .video-grid.one.small{max-width:560px; margin:0 auto;}
@media (max-width:680px){ .video-grid{grid-template-columns:1fr} }
.video-wrap{position:relative}
.video-wrap video{width:100%; border-radius:.9rem; background:#000; outline:1px solid rgba(0,0,0,.08)}
.zoom{position:absolute; right:.5rem; bottom:.5rem; border:none; border-radius:.4rem; padding:.4rem .5rem; background:rgba(0,0,0,.55); color:#fff; cursor:pointer; font-size:.95rem}

.image-strip{display:grid; grid-template-columns:repeat(3,1fr); gap:.6rem; margin:.8rem 0}
.image-strip img{width:100%; height:140px; object-fit:cover; border-radius:.7rem}

.image-grid.one{display:grid; grid-template-columns:1fr}
.image-grid.one img{width:100%; height:auto; border-radius:1rem; object-fit:cover}

.sensory{margin-top:1rem; background:var(--panel); border:1px solid rgba(0,0,0,.08); border-radius:1rem; padding:1.25rem}
.sensory-actions{display:flex; gap:.6rem; flex-wrap:wrap; align-items:center}
.chip{background:transparent; border:1px solid rgba(0,0,0,.18); padding:.6rem .95rem; border-radius:999px; cursor:pointer}
.download-btn{background:transparent; border:1px dashed rgba(0,0,0,.3); padding:.6rem .95rem; border-radius:.8rem; color:inherit}
.download-btn.primary{background:var(--brand); color:#1a1106; border:none; font-weight:800; box-shadow:0 12px 36px rgba(243,180,100,.35)}
.share-actions{display:flex; gap:.6rem; align-items:center}
.share-actions.vertical{flex-direction:column; align-items:stretch}

.story-text{background:var(--panel); border:1px solid rgba(0,0,0,.08); border-radius:1rem; padding:1.1rem; white-space:pre-wrap; line-height:1.7}
.more-wrap{
  margin-top:.6rem;
}

/* Comments */
.comments{margin-top:1rem}
.comment-list{list-style:none; padding:0; margin:0 0 .6rem 0; display:grid; gap:.6rem}
.comment-item{background:var(--panel); border:1px solid rgba(0,0,0,.08); border-radius:.7rem; padding:.7rem}
.comment-form{display:flex; gap:.6rem}
.comment-form input{flex:1; padding:.7rem .9rem; border-radius:.7rem; border:1px solid rgba(0,0,0,.14); background:#fff; color:#111}

/* Share page */
#share{min-height:calc(100vh - 140px); display:grid; place-items:start center}
.share-wrap{width:100%; max-width:1200px; padding:1rem}
.share-form{display:grid; gap:1rem; background:var(--panel); border:1px solid rgba(0,0,0,.08); border-radius:1rem; padding:1rem; width:100%}
.share-form label{display:grid; gap:.35rem; font-weight:600}
.share-form input[type="text"], .share-form textarea{padding:.7rem .9rem; border-radius:.7rem; border:1px solid rgba(0,0,0,.14); background:#fff; color:#111}
.share-grid{display:grid; grid-template-columns:1fr 1fr 1fr; gap:.6rem}
@media (max-width:900px){ .share-grid{grid-template-columns:1fr} }
.share-preview{margin-top:1rem}
.upload-evoke-btn{
  background:var(--brand); color:#1a1106; border:none; font-weight:900;
  padding:0.6rem 1rem; border-radius:0.7rem; box-shadow:0 14px 44px rgba(243,180,100,.35); cursor:pointer;
}

/* Modals */
.modal{width:min(1000px, 96vw); border:none; border-radius:1rem; padding:0; overflow:hidden; background:var(--panel); color:var(--text)}
.modal.wide{width:min(1200px, 96vw)}
.modal::backdrop{background:rgba(0,0,0,.45)}
.close{position:absolute; right:.6rem; top:.6rem; border:none; background:transparent; color:#999; font-size:1.2rem; cursor:pointer}
.modal-article{padding:1rem}
.video-modal{width:min(1200px, 96vw)}
.video-modal video{width:100%; height:auto; background:#000; display:block}

/* Connect device modal */
.connect-modal{width:min(720px, 94vw); background:transparent; padding:0; border-radius:1.1rem}
.connect-wrap{position:relative; padding:2.2rem; min-height:340px; display:grid; place-items:center; background:#000; border-radius:1.1rem; overflow:hidden; background-size:cover; background-position:center}
.connect-wrap::before{content:""; position:absolute; inset:0; background:rgba(0,0,0,.45)}
.connect-cta{position:relative; z-index:1; background:var(--brand); color:#1a1106; border:none; padding:1rem 1.4rem; border-radius:1rem; cursor:pointer; font-weight:800; box-shadow:0 12px 36px rgba(243,180,100,.35)}
.return-btn{
  position:absolute; left:12px; top:12px; z-index:2;
  background:var(--brand); color:#1a1106; border:none; padding:.6rem .9rem; border-radius:.7rem; font-weight:800; cursor:pointer;
}

/* Debug: Hide all .view except .active */
.view:not(.active) { display: none !important; }
/* Debug: Hide all .view except .active */
.view:not(.active) { display: none !important; }
.story-text-wrap:hover .read-more-hover,
.story-text:hover + .read-more-hover,
.story-text:focus-within + .read-more-hover {
  display: block !important;
}
.read-more-hover {
  display: none;
  z-index: 2;
}
.read-more-btn {
  background: var(--brand);
  color: #1a1106;
  border: none;
  padding: .95rem 1.35rem;
  border-radius: .95rem;
  cursor: pointer;
  font-weight: 800;
  box-shadow: 0 14px 44px rgba(243,180,100,.35);
  margin-top: 1rem;
  margin-left: 0;
  display: inline-block;
}

/* Remove ALL rules for .evoke-title and its children that reference :hover, transition, transform, animation, display, or visibility */
.evoke-title,
.evoke-title:hover,
.evoke-title .evoke-main,
.evoke-title .evoke-alt,
.evoke-title:hover .evoke-main,
.evoke-title:hover .evoke-alt {
  transition: none !important;
  transform: none !important;
  animation: none !important;
  display: initial !important;
  visibility: visible !important;
}

/* Make "Read the Memory" buttons for week and day match the Memory of the Month button */
.mini-spotlights .cta.outline {
  background: var(--brand);
  color: #1a1106;
  border: none;
  font-weight: 800;
  box-shadow: 0 14px 44px rgba(243,180,100,.35);
}
:root.dark .mini-spotlights .cta.outline {
  background: var(--brand) !important;
  color: #1a1106 !important;
  border: none !important;
  box-shadow: 0 14px 44px rgba(243,180,100,.35) !important;
}
.spotlight-month .spotlight-badge,
.spotlight-compact .spotlight-badge {
  background: var(--brand);
  color: #1a1106;
  font-weight: 800;
  padding: .3rem .7rem;
  border-radius: .7rem;
  box-shadow: 0 6px 20px rgba(243,180,100,.35);
  display: inline-block;
}
.spotlight-compact .spotlight-badge.soft {
  background: var(--brand);
  color: #1a1106;
  box-shadow: 0 6px 20px rgba(243,180,100,.35);
}


.spotlight-compact {
  background: var(--panel);
  border: 1px solid rgba(0,0,0,.08);
}


.mini-spotlights .cta.outline {
  background: var(--brand);
  color: #1a1106;
  border: none;
  font-weight: 800;
  box-shadow: 0 14px 44px rgba(243,180,100,.35);
}
:root.dark .mini-spotlights .cta.outline {
  background: var(--brand) !important;
  color: #1a1106 !important;
  border: none !important;
  box-shadow: 0 14px 44px rgba(243,180,100,.35) !important;
}


:root.dark .chip {
  background: #fff;
  color: #121316;
  border: 1px solid #fff;
}


#fullStoryModal .modal-article {
  max-height: 70vh;
  overflow-y: auto;
}


.upload-evoke-btn,
#shareForm .cta[type="submit"] {
  padding: 1rem 1.2rem;
  font-size: inherit;
  border-radius: 1rem;
}

.hero-title-slot {
  height: clamp(3.6rem, 9vw, 7.6rem);
  display: flex;
  align-items: flex-end;
}

